*** gcc-4.1.0/gcc/config/i386/i386.h	2005-12-13 16:17:18.000000000 +0800
--- gcc-4.1.0-patch-far/gcc/config/i386/i386.h	2006-05-30 19:05:42.000000000 +0800
*************** extern int x86_prefetch_sse;
*** 677,683 ****
     eliminated during reloading in favor of either the stack or frame
     pointer.  */
  
! #define FIRST_PSEUDO_REGISTER 53
  
  /* Number of hardware registers that go into the DWARF-2 unwind info.
     If not defined, equals FIRST_PSEUDO_REGISTER.  */
--- 677,683 ----
     eliminated during reloading in favor of either the stack or frame
     pointer.  */
  
! #define FIRST_PSEUDO_REGISTER 58
  
  /* Number of hardware registers that go into the DWARF-2 unwind info.
     If not defined, equals FIRST_PSEUDO_REGISTER.  */
*************** extern int x86_prefetch_sse;
*** 706,712 ****
  /*  r8,  r9, r10, r11, r12, r13, r14, r15*/			\
       2,   2,   2,   2,   2,   2,   2,   2,			\
  /*xmm8,xmm9,xmm10,xmm11,xmm12,xmm13,xmm14,xmm15*/		\
!      2,   2,    2,    2,    2,    2,    2,    2}
  
  
  /* 1 for registers not available across function calls.
--- 706,714 ----
  /*  r8,  r9, r10, r11, r12, r13, r14, r15*/			\
       2,   2,   2,   2,   2,   2,   2,   2,			\
  /*xmm8,xmm9,xmm10,xmm11,xmm12,xmm13,xmm14,xmm15*/		\
!      2,   2,    2,    2,    2,    2,    2,    2,		\
! /*   ss,ds,es,fs,gs */						\
!      1, 1, 1, 1, 1}
  
  
  /* 1 for registers not available across function calls.
*************** extern int x86_prefetch_sse;
*** 734,740 ****
  /*  r8,  r9, r10, r11, r12, r13, r14, r15*/			\
       1,   1,   1,   1,   2,   2,   2,   2,			\
  /*xmm8,xmm9,xmm10,xmm11,xmm12,xmm13,xmm14,xmm15*/		\
!      1,   1,    1,    1,    1,    1,    1,    1}		\
  
  /* Order in which to allocate registers.  Each register must be
     listed once, even those in FIXED_REGISTERS.  List frame pointer
--- 736,745 ----
  /*  r8,  r9, r10, r11, r12, r13, r14, r15*/			\
       1,   1,   1,   1,   2,   2,   2,   2,			\
  /*xmm8,xmm9,xmm10,xmm11,xmm12,xmm13,xmm14,xmm15*/		\
!      1,   1,    1,    1,    1,    1,    1,    1,		\
! /*   ss,ds,es,fs,gs */						\
!      1, 1, 1, 1, 1}
! 
  
  /* Order in which to allocate registers.  Each register must be
     listed once, even those in FIXED_REGISTERS.  List frame pointer
*************** extern int x86_prefetch_sse;
*** 749,755 ****
  {  0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17,\
     18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32,	\
     33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47,  \
!    48, 49, 50, 51, 52 }
  
  /* ORDER_REGS_FOR_LOCAL_ALLOC is a macro which permits reg_alloc_order
     to be rearranged based on a particular function.  When using sse math,
--- 754,760 ----
  {  0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17,\
     18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32,	\
     33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47,  \
!    48, 49, 50, 51, 52, 53, 54, 55, 56, 57 }
  
  /* ORDER_REGS_FOR_LOCAL_ALLOC is a macro which permits reg_alloc_order
     to be rearranged based on a particular function.  When using sse math,
*************** do {							\
*** 1958,1964 ****
   "xmm0","xmm1","xmm2","xmm3","xmm4","xmm5","xmm6","xmm7",		\
   "mm0", "mm1", "mm2", "mm3", "mm4", "mm5", "mm6", "mm7"	,		\
   "r8", "r9", "r10", "r11", "r12", "r13", "r14", "r15",			\
!  "xmm8", "xmm9", "xmm10", "xmm11", "xmm12", "xmm13", "xmm14", "xmm15"}
  
  #define REGISTER_NAMES HI_REGISTER_NAMES
  
--- 1963,1970 ----
   "xmm0","xmm1","xmm2","xmm3","xmm4","xmm5","xmm6","xmm7",		\
   "mm0", "mm1", "mm2", "mm3", "mm4", "mm5", "mm6", "mm7"	,		\
   "r8", "r9", "r10", "r11", "r12", "r13", "r14", "r15",			\
!  "xmm8", "xmm9", "xmm10", "xmm11", "xmm12", "xmm13", "xmm14", "xmm15",	\
!  "ss", "ds", "es", "fs", "gs"}
  
  #define REGISTER_NAMES HI_REGISTER_NAMES
  
